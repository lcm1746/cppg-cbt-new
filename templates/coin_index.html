<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>코인 자동매매 대시보드</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #f7f7f7; }
        h1 { color: #222; text-align:center; }
        .summary { width: 60%; margin: 20px auto; background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 8px #ddd; }
        .profit { font-size: 1.2em; }
        .profit.up { color: #d32f2f; }
        .profit.down { color: #1976d2; }
        table { border-collapse: collapse; width: 80%; margin: 30px auto; background: #fff; box-shadow: 0 2px 8px #ddd; }
        th, td { padding: 10px 16px; border-bottom: 1px solid #eee; text-align: center; }
        th { background: #f0f0f0; }
        tr:last-child td { border-bottom: none; }
        .btn { padding: 10px 24px; border: none; border-radius: 4px; font-size: 1em; cursor: pointer; margin: 10px; }
        .btn-start { background: #388e3c; color: #fff; }
        .btn-stop { background: #d32f2f; color: #fff; }
    </style>
</head>
<body>
    <h1>코인 자동매매 대시보드</h1>
    <div class="summary">
        <div>총 자산: <b>{{ total_asset }} 원</b></div>
        <div class="profit {% if profit >= 0 %}up{% else %}down{% endif %}">
            수익률: {{ profit_pct }}% ({{ profit }} 원)
        </div>
        <div style="margin-top:10px;">
            {% if auto_running %}
                <form action="/stop" method="get" style="display:inline;"><button class="btn btn-stop">자동매매 중지</button></form>
            {% else %}
                <form action="/start" method="get" style="display:inline;"><button class="btn btn-start">자동매매 시작</button></form>
            {% endif %}
        </div>
    </div>
    <table>
        <tr>
            <th>코인명</th>
            <th>보유수량</th>
            <th>매수단가</th>
            <th>현재가</th>
        </tr>
        {% for coin in coins %}
        <tr>
            <td>{{ coin.name }} ({{ coin.symbol }})</td>
            <td>{{ portfolio.coins[coin.symbol] }}</td>
            <td>{% if portfolio.buy_price[coin.symbol] %}{{ portfolio.buy_price[coin.symbol] }}{% else %}-{% endif %}</td>
            <td>{{ upbit.get_current_price(coin.symbol) }}</td>
        </tr>
        {% endfor %}
    </table>
    <h2 style="text-align:center;">거래 내역</h2>
    <table>
        <tr>
            <th>시간</th>
            <th>종류</th>
            <th>코인</th>
            <th>수량</th>
            <th>가격</th>
        </tr>
        {% for trade in portfolio.trades|reverse %}
        <tr>
            <td>{{ trade.time }}</td>
            <td>{{ trade.type }}</td>
            <td>{{ trade.symbol }}</td>
            <td>{{ trade.amount }}</td>
            <td>{{ trade.price }}</td>
        </tr>
        {% endfor %}
    </table>
    <div style="text-align:center; color:#888; margin-top:30px;">※ 본 서비스는 모의 투자(테스트)용입니다.</div>
</body>
</html> 